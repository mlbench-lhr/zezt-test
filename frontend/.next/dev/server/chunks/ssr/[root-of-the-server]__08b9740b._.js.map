{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Documents/zezt-test/frontend/app/components/OffersScreen.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\n\ntype Offer = {\n  id: string;\n  restaurant_name: string;\n  start_time: string;\n  end_time: string;\n  discount_percent: number;\n  created_at: string;\n};\n\ntype OffersResponse = {\n  enable_smart_recommendations: boolean;\n  server_time: string;\n  offers: Offer[];\n};\n\nfunction getApiBaseUrl() {\n  const envValue = process.env.NEXT_PUBLIC_API_BASE_URL;\n  return envValue && envValue.length > 0 ? envValue : \"http://localhost:4000\";\n}\n\nexport function OffersScreen() {\n  const [enableSmartRecommendations, setEnableSmartRecommendations] = useState(false);\n  const [data, setData] = useState<OffersResponse | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const offersUrl = useMemo(() => {\n    const url = new URL(\"/offers\", getApiBaseUrl());\n    url.searchParams.set(\"enable_smart_recommendations\", String(enableSmartRecommendations));\n    return url.toString();\n  }, [enableSmartRecommendations]);\n\n  useEffect(() => {\n    let isStale = false;\n\n    async function load() {\n      setIsLoading(true);\n      setError(null);\n\n      try {\n        const res = await fetch(offersUrl, { cache: \"no-store\" });\n        if (!res.ok) {\n          const text = await res.text();\n          throw new Error(`Request failed (${res.status}): ${text}`);\n        }\n        const json = (await res.json()) as OffersResponse;\n        if (isStale) return;\n        setData(json);\n      } catch (e) {\n        if (isStale) return;\n        setError(e instanceof Error ? e.message : \"Unknown error\");\n        setData(null);\n      } finally {\n        if (isStale) return;\n        setIsLoading(false);\n      }\n    }\n\n    void load();\n\n    return () => {\n      isStale = true;\n    };\n  }, [offersUrl]);\n\n  return (\n    <div style={{ maxWidth: 900, margin: \"0 auto\", padding: 24, fontFamily: \"system-ui, sans-serif\" }}>\n      <h1 style={{ fontSize: 28, marginBottom: 8 }}>Restaurant Offers</h1>\n      <p style={{ color: \"#555\", marginTop: 0 }}>\n        Showing active offers. Toggle “smart recommendations” to sort by highest discount.\n      </p>\n\n      <label style={{ display: \"flex\", gap: 12, alignItems: \"center\", margin: \"16px 0\" }}>\n        <input\n          type=\"checkbox\"\n          checked={enableSmartRecommendations}\n          onChange={(e) => setEnableSmartRecommendations(e.target.checked)}\n        />\n        <span>enable_smart_recommendations</span>\n      </label>\n\n      <div style={{ display: \"flex\", gap: 16, flexWrap: \"wrap\", color: \"#555\", fontSize: 14 }}>\n        <div>\n          <div style={{ fontWeight: 600, color: \"#111\" }}>Backend</div>\n          <div>{getApiBaseUrl()}</div>\n        </div>\n        <div>\n          <div style={{ fontWeight: 600, color: \"#111\" }}>Server time</div>\n          <div>{data?.server_time ?? \"—\"}</div>\n        </div>\n      </div>\n\n      <div style={{ marginTop: 20 }}>\n        {isLoading ? <div>Loading…</div> : null}\n        {error ? (\n          <div style={{ color: \"#b00020\" }}>\n            <div style={{ fontWeight: 600 }}>Error</div>\n            <div>{error}</div>\n          </div>\n        ) : null}\n      </div>\n\n      <div style={{ marginTop: 20 }}>\n        {data && data.offers.length === 0 && !isLoading && !error ? <div>No active offers.</div> : null}\n\n        <ul style={{ listStyle: \"none\", padding: 0, display: \"grid\", gap: 12 }}>\n          {(data?.offers ?? []).map((offer) => (\n            <li key={offer.id} style={{ border: \"1px solid #ddd\", borderRadius: 8, padding: 12 }}>\n              <div style={{ display: \"flex\", justifyContent: \"space-between\", gap: 12, flexWrap: \"wrap\" }}>\n                <div style={{ fontWeight: 700 }}>{offer.restaurant_name}</div>\n                <div style={{ fontWeight: 700 }}>{offer.discount_percent}% off</div>\n              </div>\n\n              <div style={{ marginTop: 8, color: \"#555\", fontSize: 14, display: \"grid\", gap: 4 }}>\n                <div>\n                  <span style={{ fontWeight: 600, color: \"#111\" }}>Start: </span>\n                  <span>{offer.start_time}</span>\n                </div>\n                <div>\n                  <span style={{ fontWeight: 600, color: \"#111\" }}>End: </span>\n                  <span>{offer.end_time}</span>\n                </div>\n              </div>\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 398, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Documents/zezt-test/frontend/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 417, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Documents/zezt-test/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 422, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Documents/zezt-test/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}